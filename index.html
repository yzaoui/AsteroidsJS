<!DOCTYPE html>
<html>
<head>
    <title>Drawing a bouncing Pacman</title>
    <link rel="stylesheet" href="styles.css">
    <script src="drawing.js"></script>
</head>
<body>
<h1>Drawing a bouncing Pacman</h1>
<canvas id="asteroids" width="400" height="400"></canvas>
<script>
    let context = document.getElementById("asteroids").getContext("2d");
    context.strokeStyle = "white";
    context.lineWidth = 1.5;
    let x = 40;
    let y = context.canvas.height / 2;
    let radius = 20;
    let xspeed = 2;
    let yspeed = 0;
    let gravity = 0.1;
    let mouthOpenFactor = 0;

    function frame() {
        context.clearRect(0, 0, context.canvas.width, context.canvas.height);
        draw(context);
        update();
    }

    function update() {
        x += xspeed;
        y += yspeed;
        yspeed += gravity;

        if (y >= context.canvas.height - radius) {
            y = context.canvas.height - radius;
            xspeed *= 0.95;
            yspeed *= -0.6;
        }

        if (x <= 0 || x >= context.canvas.width) {
            x = (x + context.canvas.width) % context.canvas.width;
        }

        mouthOpenFactor = Math.abs(Math.sin(6 * Math.PI * x / (context.canvas.width)));
    }

    function draw(ctx) {
        drawGrid(ctx);
        ctx.save();
        ctx.translate(x, y);
        drawPacman(ctx, radius, mouthOpenFactor);
        ctx.restore();
    }

    setInterval(frame, 1000.0/60.0); // 60 fps
</script>
</body>
</html>
